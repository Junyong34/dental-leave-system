# ë”ì™€ì´ì¦ˆ ì¹˜ê³¼ë³‘ì› ì—°ì°¨ ê´€ë¦¬ ì‹œìŠ¤í…œ PRD

## 1. ê°œìš”

### 1.1 ëª©ì 

ë³¸ ë¬¸ì„œëŠ” ë”ì™€ì´ì¦ˆ ì¹˜ê³¼ë³‘ì› ì§ì›(ì•½ 80ëª…)ì˜ ì—°ì°¨ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì—°ì°¨ ê´€ë¦¬ ì‹œìŠ¤í…œ ê°œë°œì„ ìœ„í•œ ì œí’ˆ ìš”êµ¬ì‚¬í•­ì„ ì •ì˜í•œë‹¤.

### 1.2 ë°°ê²½

í˜„ì¬ ì—°ì°¨ ê´€ë¦¬ê°€ ìˆ˜ê¸° ë˜ëŠ” ë¶„ì‚°ëœ ë°©ì‹ìœ¼ë¡œ ìš´ì˜ë˜ì–´ ê´€ë¦¬ ë¶€ë‹´ê³¼ ì˜¤ë¥˜ ê°€ëŠ¥ì„±ì´ ì¡´ì¬í•œë‹¤. ì´ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ ì›¹ ê¸°ë°˜ ì—°ì°¨ ê´€ë¦¬ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•œë‹¤.

### 1.3 ëŒ€ìƒ ì‚¬ìš©ì

* ì¼ë°˜ ì§ì›
* ê´€ë¦¬ì(ì¸ì‚¬/ìš´ì˜ ë‹´ë‹¹ì)

---

## 2. ê´€ë ¨ ë²•ì /ì—…ë¬´ ì •ì±…

ì•„ë˜ëŠ” ê¸°ì¡´ ê¸°íš ë¬¸ì„œë¥¼ **â€œë°˜ì°¨(0.5ì¼)ë§Œ ì¡´ì¬, ì‹œê°„ì°¨ ì—†ìŒâ€** ì¡°ê±´ì— ë§ê²Œ ìˆ˜ì •Â·ë³´ì™„í•œ ë²„ì „ì…ë‹ˆë‹¤.

---

# ğŸ“„ ì—°ì°¨ ê´€ë¦¬ ì‹œìŠ¤í…œ ê¸°íš ë¬¸ì„œ (ë°˜ì°¨ í¬í•¨ ë²„ì „)

---

## 1. ëª©ì 

ë³¸ ì‹œìŠ¤í…œì€ ì‚¬ìš©ìë³„ ì—°ì°¨ ë° ë°˜ì°¨ë¥¼ í†µí•© ê´€ë¦¬í•˜ì—¬ ë‹¤ìŒì„ ëª©í‘œë¡œ í•œë‹¤.

* ì—°ì°¨/ë°˜ì°¨ ìë™ ê³„ì‚° ë° ì°¨ê°
* ì‚¬ìš©/ì˜ˆì•½ í˜„í™© ê´€ë¦¬
* ì´ì›”Â·ì†Œë©¸ ê·œì¹™ ì¤€ìˆ˜
* ìš”ì¼ë³„ ì‚¬ìš© íŒ¨í„´ ë¶„ì„
* ê·¸ë£¹ ë‚´ ì—°ì°¨ ì‚¬ìš© ì¡°ì • ì§€ì›

---

## 2. ì—°ì°¨ ì •ì±… ì •ì˜

---

## 2.1 ì—°ì°¨ ë°œìƒ ê·œì¹™

### ê¸°ë³¸ ê·œì¹™

* ê¸°ë³¸ ì—°ì°¨: ì—° 15ì¼
* ê·¼ì† 2ë…„ ì´ˆê³¼ ì‹œë§ˆë‹¤ +1ì¼
* ìµœëŒ€ ì—°ì°¨: 25ì¼
* ë‹¨ìœ„: **0.5ì¼ ë‹¨ìœ„ ê´€ë¦¬**

### ê³„ì‚°ì‹

```
ì—°ì°¨ = min(15 + floor((ê·¼ì†ì—°ìˆ˜ - 1) / 2), 25)
```

> ëª¨ë“  ì—°ì°¨ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ 0.5 ë‹¨ìœ„ë¡œ ê´€ë¦¬í•œë‹¤.

---

### ì˜ˆì‹œ

| ê·¼ì†ì—°ìˆ˜   | ì—°ì°¨  |
| ------ | --- |
| 1~2ë…„   | 15ì¼ |
| 3~4ë…„   | 16ì¼ |
| 5~6ë…„   | 17ì¼ |
| ...    | ... |
| 21ë…„ ì´ìƒ | 25ì¼ |

---

## 2.2 ì—°ì°¨/ë°˜ì°¨ ì‚¬ìš© ë‹¨ìœ„

| ìœ í˜• | ì°¨ê° ë‹¨ìœ„ |
| -- | ----- |
| ì—°ì°¨ | 1.0ì¼  |
| ë°˜ì°¨ | 0.5ì¼  |

### ì •ì±…

* ì—°ì°¨ëŠ” 1ì¼ ë‹¨ìœ„ ì‚¬ìš©
* ë°˜ì°¨ëŠ” ì˜¤ì „/ì˜¤í›„ êµ¬ë¶„ ê°€ëŠ¥
* ëª¨ë“  ì”ì—¬ ì—°ì°¨ëŠ” 0.5 ë‹¨ìœ„ë¡œ ì €ì¥

ğŸ‘‰ **0.5 ë‹¨ìœ„ í†µí•© ê´€ë¦¬ ë°©ì‹ ê¶Œì¥**

(ì •ìˆ˜í˜•ìœ¼ë¡œ ê´€ë¦¬ ì‹œ: 1ì¼ = 2í¬ì¸íŠ¸ ë°©ì‹ë„ ê°€ëŠ¥)

---

## 2.3 ì—°ì°¨ ì´ì›” ê·œì¹™

* ë¯¸ì‚¬ìš© ì—°ì°¨ëŠ” ë‹¤ìŒ í•´ë¡œ ì´ì›”
* ì´ì›” ì—°ì°¨ëŠ” ë‹¤ìŒ í•´ì— ë°˜ë“œì‹œ ì†Œì§„
* ìµœëŒ€ ë³´ê´€: 2ë…„
* 2ë…„ ì´ˆê³¼ ì‹œ ìë™ ì†Œë©¸
* ë°˜ì°¨ í¬í•¨ ë™ì¼ ê·œì¹™ ì ìš©

---

## 2.4 ì‚¬ìš© ì œí•œ ê·œì¹™

1. ì¼ìš”ì¼ ì‚¬ìš© ë¶ˆê°€
2. ë™ì¼ ê·¸ë£¹ ë™ì¼ ë‚ ì§œ ë‹¤ìˆ˜ ì œí•œ
3. ë°˜ì°¨ë„ ë™ì¼ ë‚ ì§œ ì œí•œ ê¸°ì¤€ì— í¬í•¨

---

## 3. í•µì‹¬ ê¸°ëŠ¥ ì„¤ê³„

---

## 3.1 ì‚¬ìš©ì ì—°ì°¨ í˜„í™© ì¡°íšŒ

### ì…ë ¥

* user_id
* ê¸°ì¤€ì¼(ê¸°ë³¸: ì˜¤ëŠ˜)

### ì¶œë ¥

| í•­ëª©    | ì„¤ëª…        |
| ----- | --------- |
| ì´ ì—°ì°¨  | ì „ì²´ ë°œìƒ ì—°ì°¨  |
| ì‚¬ìš© ì™„ë£Œ | ì‚¬ìš©ëœ ì—°ì°¨+ë°˜ì°¨ |
| ì‚¬ìš© ì˜ˆì • | ì˜ˆì•½ëœ ì—°ì°¨+ë°˜ì°¨ |
| ì”ì—¬ ì—°ì°¨ | í˜„ì¬ ê°€ëŠ¥ ìˆ˜ëŸ‰  |
| ë§Œë£Œ ì •ë³´ | ê°€ì¥ ë¹ ë¥¸ ë§Œë£Œ  |

### ì˜ˆì‹œ

```
ì´ ì—°ì°¨: 16.0ì¼
ì‚¬ìš© ì™„ë£Œ: 5.5ì¼
ì‚¬ìš© ì˜ˆì •: 2.0ì¼
ì”ì—¬: 8.5ì¼
```

---

## 3.2 ì—°ì°¨ ìë™ ì°¨ê° ì²˜ë¦¬

### ì¡°ê±´

```
ì˜¤ëŠ˜ ë‚ ì§œ == ì˜ˆì•½ ë‚ ì§œ
```

### ì²˜ë¦¬ ë°©ì‹

1. ë‹¹ì¼ ì˜ˆì•½ ì¡°íšŒ
2. ì—°ì°¨/ë°˜ì°¨ êµ¬ë¶„
3. ì°¨ê° ë‹¨ìœ„ ì ìš©
4. FIFO ì°¨ê°
5. ì´ë ¥ ì €ì¥

---

## 3.3 ì—°ì°¨ ì°¨ê° ìš°ì„ ìˆœìœ„ (FIFO)

### ì›ì¹™

* ë§Œë£Œì¼ ê¸°ì¤€ ì˜¤ë¦„ì°¨ìˆœ
* ì˜¤ë˜ëœ ì—°ì°¨ë¶€í„° ì°¨ê°
* 0.5 ë‹¨ìœ„ë„ ë™ì¼ ì ìš©

### ì˜ˆì‹œ

```
2024ë…„ ì”ì—¬ 1.0ì¼
2025ë…„ ì”ì—¬ 3.5ì¼

â†’ ë°˜ì°¨ ì‚¬ìš©(0.5)
â†’ 2024ë…„ì—ì„œ ì°¨ê°
```

---

## 3.4 ì—°ì°¨ ì‚¬ìš© ê¸°ë¡ ê´€ë¦¬

### ì €ì¥ í•„ë“œ

| í•„ë“œ          | ì„¤ëª…          |
| ----------- | ----------- |
| user_id     | ì‚¬ìš©ì         |
| date        | ì‚¬ìš©ì¼         |
| type        | FULL / HALF |
| session     | AM / PM     |
| amount      | 1.0 / 0.5   |
| weekday     | ìš”ì¼          |
| source_year | ì°¨ê° ì—°ì°¨ë…„ë„     |

---

---

## 3.5 ìš”ì¼ë³„ ì‚¬ìš© í†µê³„

### ëª©ì 

* ê°œì¸ë³„ ìš”ì¼ ì„ í˜¸ë„ ë¶„ì„
* ê·¸ë£¹ ìš°ì„ ìˆœìœ„ ì‚°ì • í™œìš©

### ì˜ˆì‹œ

| user_id | weekday | total_used |
| ------- | ------- | ---------- |
| U01     | MON     | 8.5        |
| U01     | FRI     | 12.0       |

---

## 4. ì‹œìŠ¤í…œ ë™ì‘ íë¦„

---

## 4.1 ì—°ì°¨ ë°œìƒ í”„ë¡œì„¸ìŠ¤

```
ë§¤ë…„ 1ì›” 1ì¼
â†“
ê·¼ì† ê³„ì‚°
â†“
ì—°ì°¨ ìƒì„±(0.5 ë‹¨ìœ„)
â†“
ë§Œë£Œì¼ ì„¤ì •
```

---

## 4.2 ì—°ì°¨/ë°˜ì°¨ ì‹ ì²­ í”„ë¡œì„¸ìŠ¤

```
ì‚¬ìš© ì‹ ì²­
â†“
ìœ íš¨ì„± ê²€ì‚¬
â†“
ê·¸ë£¹ ì œí•œ í™•ì¸
â†“
ì˜ˆì•½ ë“±ë¡
â†“
ë‹¹ì¼ ìë™ ì°¨ê°
â†“
ì‚¬ìš© ì´ë ¥ ì €ì¥
```

---

## 5. ë°ì´í„° êµ¬ì¡° ì„¤ê³„

---

## 5.1 User

```json
{
  "user_id": "U001",
  "join_date": "2020-03-01",
  "group_id": "G01",
  "status": "ACTIVE"
}
```

---

## 5.2 LeaveBalance

```json
{
  "user_id": "U001",
  "year": 2025,
  "total": 16.0,
  "used": 4.5,
  "remain": 11.5,
  "expire_at": "2026-12-31"
}
```

---

## 5.3 LeaveReservation

```json
{
  "id": 11,
  "user_id": "U001",
  "date": "2026-02-10",
  "type": "HALF",
  "session": "PM",
  "amount": 0.5,
  "status": "RESERVED"
}
```

---

## 5.4 LeaveHistory

```json
{
  "id": 51,
  "user_id": "U001",
  "date": "2025-09-03",
  "type": "FULL",
  "amount": 1.0,
  "weekday": "WED",
  "source_year": 2024
}
```

---

## 6. ì˜ˆì™¸ ì¼€ì´ìŠ¤ ë° ì¶”ê°€ ê³ ë ¤ì‚¬í•­

---

### 6.1 ë°˜ì°¨ ì¤‘ë³µ ë°©ì§€

* ë™ì¼ ë‚ ì§œ AM+AM ë¶ˆê°€
* AM+PM â†’ ì „ì¼ ì²˜ë¦¬ ê°€ëŠ¥ ì—¬ë¶€ ì •ì±…í™” í•„ìš”

---

### 6.2 ë°˜ì°¨ â†’ ì—°ì°¨ ì „í™˜

ì˜ˆ:

```
AM ë°˜ì°¨ + PM ë°˜ì°¨ = 1ì¼ ì—°ì°¨
```

ìë™ ë³‘í•© ì—¬ë¶€ ì„¤ì • í•„ìš”

---

### 6.3 ì—°ì°¨ ë¶€ì¡± ìƒíƒœ

* 0.5 ë¯¸ë§Œ ì”ì—¬ ì‹œ ë°˜ì°¨ë§Œ ê°€ëŠ¥
* 1.0 ë¯¸ë§Œ ì‹œ ì—°ì°¨ ë¶ˆê°€

---

### 6.4 íœ´ì¼/ê³µíœ´ì¼ ì •ì±…

* ê³µíœ´ì¼ì—ë„ ì¼ì€ í•˜ëŠ”ë° ì—°ì°¨ëŠ” ë”°ë¡œ ì“°ëŠ”ê±´ì•„ë‹ˆê³  ê³µíœ´ì¼ì— ì¼í•˜ë©´ ì—°ì°¨ë¥¼ 1.5ê°œ ì¤˜ì•¼í•¨ 
  * ì´ ê±´ì€ ìš°ì„  ì‚¬ìš©ìê°€ ì§ì ‘ ë°ì´í„° ì ‘ê·¼í•´ì„œ ì‚¬ìš©ì—°ì°¨ 1.5ë¥¼ ì¶”ê°€í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì§„í–‰
* í† ìš”ì¼ í—ˆìš©

---

### 6.5 ì˜ˆì•½ ë¯¸ì‚¬ìš© ì²˜ë¦¬ (ë…¸ì‡¼)

* ìë™ ì·¨ì†ŒëŠ” ì—†ìŒ ì‚¬ìš©ìê°€ ì§ì ‘ ì‚­ì œ í•˜ê±°ë‚˜ ë°ì´í„°ë¥¼ ìˆ˜ì •í•¨

---

---

## 7. ì¶”ê°€ í•„ìš” ë°ì´í„°

| í•­ëª©                    | ì„¤ëª…     |
| --------------------- | ------ |
| leave_unit            | 0.5 ê³ ì • |
| max_daily_group_limit | ì¼ì¼ ì œí•œ  |
| holiday_calendar      | íœ´ì¼     |
| approval_status       | ìŠ¹ì¸ì—¬ë¶€   |
| cancel_reason         | ì·¨ì†Œì‚¬ìœ    |

---

## 8. ê·¼ê±°(Evidence)

1. êµ­ë‚´ HR ì‹œìŠ¤í…œ ì¼ë°˜ ì„¤ê³„ ë°©ì‹
2. ë°˜ì°¨ 0.5 ë‹¨ìœ„ í‘œì¤€ ì‚¬ë¡€
3. FIFO ì—°ì°¨ ì°¨ê° ê´€í–‰
4. ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ ê¸°ë°˜ ì„¤ê³„

---

## 9. ì‹ ë¢°ë„ í‰ê°€

* 0.5 ë‹¨ìœ„ ê´€ë¦¬ â†’ ì‹¤ë¬´ HR ì‹œìŠ¤í…œì—ì„œ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë¨
* ë°˜ì°¨ ë³‘í•©/ì œí•œ â†’ íšŒì‚¬ ì •ì±…ì— ë”°ë¼ ë‹¤ë¦„

ğŸ‘‰ ì¼ë¶€ ì •ì±…ì€ ë‚´ë¶€ í•©ì˜ í•„ìš”

---

## 10. ë°˜ì°¨ 0.5 / ì—°ì°¨ 1.0 ë°©ì‹ì— ëŒ€í•œ í‰ê°€

### ê¶Œì¥ ë°©ì‹: âœ… Yes

> **ì—°ì°¨ = 1.0 / ë°˜ì°¨ = 0.5 í†µí•© ê´€ë¦¬ ë°©ì‹ì´ ê°€ì¥ ì•ˆì •ì **

#### ì´ìœ 

1. ê³„ì‚° ë‹¨ìˆœ
2. ì´ì›”/ì°¨ê°/í†µê³„ ì¼ê´€ì„± ìœ ì§€
3. ì†Œìˆ˜ì  0.5ë§Œ ì¡´ì¬ â†’ ì˜¤ì°¨ ì—†ìŒ
4. DB ì„¤ê³„ ê°„ê²°



## 7. ê¸°ìˆ  ìŠ¤íƒ

### 7.1 Frontend

* React 19.2.3
* TypeScript 5.9.3
* Vite 7.3.1
* React Router 7.12.0
* React Router DOM 7.12.0
* Biome 2.3.11

### 7.2 Backend & Database

* **Supabase** - BaaS (Backend as a Service)
  * PostgreSQL ë°ì´í„°ë² ì´ìŠ¤
  * ì‹¤ì‹œê°„ êµ¬ë… (Realtime)
  * ì¸ì¦ ì‹œìŠ¤í…œ (Auth)
  * Row Level Security (RLS)
  * RPC í•¨ìˆ˜ ì§€ì›
* **@supabase/supabase-js** 2.49.2 - Supabase JavaScript í´ë¼ì´ì–¸íŠ¸

### 7.3 UI ë¼ì´ë¸ŒëŸ¬ë¦¬

* FullCalendar 6.1.20
  * @fullcalendar/react
  * @fullcalendar/daygrid
  * @fullcalendar/timegrid
  * @fullcalendar/interaction
* Tailwind CSS 4.1.18
* Lucide React 0.562.0
* Class Variance Authority 0.7.1
* Tailwind Merge 3.4.0
* clsx 2.1.1

### 7.4 í¼ & ìœ í‹¸ë¦¬í‹°

* React Hook Form 7.71.1
* date-fns 4.1.0

### 7.5 ìƒíƒœ ê´€ë¦¬

* Zustand 5.0.10
  * persist middlewareë¥¼ ì‚¬ìš©í•œ localStorage ì—°ë™
  * ì „ì—­ ì¸ì¦ ìƒíƒœ ê´€ë¦¬

---

## 8. Supabase êµ¬ì¡° ë° ì„¤ì •

### 8.1 í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/lib/supabase/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ auth.ts          # ì¸ì¦ ê´€ë ¨ API (ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ, ë¹„ë°€ë²ˆí˜¸ ê´€ë¦¬)
â”‚   â”œâ”€â”€ leave.ts         # ì—°ì°¨ ê´€ë ¨ API (ì¡°íšŒ, ì‹ ì²­, ìŠ¹ì¸, ì·¨ì†Œ)
â”‚   â””â”€â”€ user.ts          # ì‚¬ìš©ì ê´€ë ¨ API (CRUD)
â”œâ”€â”€ types/
â”‚   â””â”€â”€ database.types.ts # ë°ì´í„°ë² ì´ìŠ¤ íƒ€ì… ì •ì˜
â”œâ”€â”€ client.ts            # Supabase í´ë¼ì´ì–¸íŠ¸ ì‹±ê¸€í†¤
â””â”€â”€ config.ts            # Supabase ì„¤ì • ë° í™˜ê²½ ë³€ìˆ˜
```

### 8.2 ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”

#### **users** - ì‚¬ìš©ì(ì§ì›) í…Œì´ë¸”
```sql
- user_id (string, PK): ì‚¬ìš©ì ID
- name (string): ì´ë¦„
- join_date (date): ì…ì‚¬ì¼
- group_id (string): ê·¸ë£¹ ID
- status (enum): ìƒíƒœ (ACTIVE, INACTIVE, RESIGNED)
```

#### **leave_balances** - ì—°ì°¨ ì”ì•¡ í…Œì´ë¸” (ì—°ë„ë³„)
```sql
- user_id (string, PK): ì‚¬ìš©ì ID
- year (number, PK): ì—°ë„
- total (number): í•´ë‹¹ ì—°ë„ ë°œìƒ ì—°ì°¨ (0.5 ë‹¨ìœ„)
- used (number): ì‚¬ìš©í•œ ì—°ì°¨
- remain (number): ì”ì—¬ ì—°ì°¨ (ê³„ì‚° í•„ë“œ)
- expire_at (date): ë§Œë£Œì¼
```

#### **leave_reservations** - ì—°ì°¨ ì˜ˆì•½ í…Œì´ë¸”
```sql
- id (number, PK): ì˜ˆì•½ ID
- user_id (string): ì‚¬ìš©ì ID
- date (date): ë‚ ì§œ
- type (enum): FULL(ì¢…ì¼) / HALF(ë°˜ì°¨)
- session (enum): AM(ì˜¤ì „) / PM(ì˜¤í›„) / null
- amount (number): 1.0 or 0.5
- status (enum): RESERVED / USED / CANCELLED
- created_at (timestamp): ìƒì„± ì‹œê°
```

#### **leave_history** - ì—°ì°¨ ì‚¬ìš© ì´ë ¥ í…Œì´ë¸”
```sql
- id (number, PK): ì´ë ¥ ID
- user_id (string): ì‚¬ìš©ì ID
- date (date): ì‚¬ìš©ì¼
- type (enum): FULL / HALF
- session (enum): AM / PM / null
- amount (number): 1.0 or 0.5
- weekday (enum): ìš”ì¼ (MON ~ SUN)
- source_year (number): ì°¨ê°ëœ ì—°ì°¨ì˜ ë°œìƒ ì—°ë„ (FIFO)
- used_at (timestamp): ì‚¬ìš© ì‹œê°
```

#### **leave_usage_stats** - ìš”ì¼ë³„ ì‚¬ìš© í†µê³„
```sql
- user_id (string, PK): ì‚¬ìš©ì ID
- weekday (enum, PK): ìš”ì¼
- total_used (number): í•´ë‹¹ ìš”ì¼ì— ì‚¬ìš©í•œ ì´ ì—°ì°¨
- count (number): ì‚¬ìš© íšŸìˆ˜
```

### 8.3 RPC í•¨ìˆ˜ (PostgreSQL Functions)

#### `reserve_leave` - ì—°ì°¨ ì‹ ì²­
```typescript
// ì…ë ¥
{
  p_user_id: string,
  p_date: string,
  p_type: 'FULL' | 'HALF',
  p_session: 'AM' | 'PM' | null
}

// ì¶œë ¥
{
  success: boolean,
  message: string,
  reservation_id?: number
}
```
- ì”ì•¡ í™•ì¸, ì¤‘ë³µ ì²´í¬, ê·¸ë£¹ ì œí•œ ê²€ì¦ì„ ìë™ìœ¼ë¡œ ìˆ˜í–‰

#### `approve_leave` - ì—°ì°¨ ìŠ¹ì¸
```typescript
// ì…ë ¥
{ p_reservation_id: number }

// ì¶œë ¥
{ success: boolean, message: string }
```
- ì˜ˆì•½ëœ ì—°ì°¨ë¥¼ ìŠ¹ì¸í•˜ê³  ì‹¤ì œ ì‚¬ìš© ì´ë ¥ìœ¼ë¡œ ì „í™˜
- FIFO ë°©ì‹ìœ¼ë¡œ ì”ì•¡ ì°¨ê°

#### `cancel_leave` - ì—°ì°¨ ì·¨ì†Œ
```typescript
// ì…ë ¥
{ p_reservation_id: number }

// ì¶œë ¥
{ success: boolean, message: string }
```

#### `get_user_leave_status` - ì‚¬ìš©ì ì—°ì°¨ í˜„í™© ì¡°íšŒ
```typescript
// ì…ë ¥
{ p_user_id: string }

// ì¶œë ¥
{
  total: number,    // ì „ì²´ ë°œìƒ ì—°ì°¨
  used: number,     // ì‚¬ìš© ì™„ë£Œëœ ì—°ì°¨
  reserved: number, // ì˜ˆì•½ëœ ì—°ì°¨
  remain: number    // ì”ì—¬ ì—°ì°¨
}
```

### 8.4 í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— í™˜ê²½ë³„ `.env` íŒŒì¼ ìƒì„±:

```bash
# .env.development
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_PUBLISHABLE_DEFAULT_KEY=your-anon-key

# .env.qa
VITE_SUPABASE_URL=https://your-qa-project.supabase.co
VITE_SUPABASE_PUBLISHABLE_DEFAULT_KEY=your-qa-anon-key

# .env.production
VITE_SUPABASE_URL=https://your-prod-project.supabase.co
VITE_SUPABASE_PUBLISHABLE_DEFAULT_KEY=your-prod-anon-key
```

### 8.5 ì‚¬ìš© ì˜ˆì‹œ

#### ì¸ì¦
```typescript
import { useAuthStore } from '@/store/authStore'

function LoginPage() {
  const { login, isAuthenticated, user } = useAuthStore()

  const handleLogin = async () => {
    const success = await login('user@example.com', 'password')
    if (success) {
      console.log('ë¡œê·¸ì¸ ì„±ê³µ')
    }
  }
}
```

#### ì—°ì°¨ ì¡°íšŒ
```typescript
import { getUserLeaveStatus } from '@/lib/supabase/api/leave'

const result = await getUserLeaveStatus('U001')
if (result.success && result.data) {
  console.log('ì”ì—¬ ì—°ì°¨:', result.data.remain)
}
```

#### ì—°ì°¨ ì‹ ì²­
```typescript
import { reserveLeave } from '@/lib/supabase/api/leave'

const result = await reserveLeave('U001', '2025-12-25', 'FULL', null)
if (result.success) {
  console.log('ì—°ì°¨ ì‹ ì²­ ì™„ë£Œ')
}
```

### 8.6 íƒ€ì… ìë™ ìƒì„±

Supabase CLIë¡œ TypeScript íƒ€ì…ì„ ìë™ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
npx supabase gen types typescript --project-id <PROJECT_ID> > src/lib/supabase/types/database.types.ts
```

---

## 9.  ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ì²œ

### 9.1 full-calendar

* URL: [https://github.com/yassir-jeraidi/full-calendar](https://github.com/yassir-jeraidi/full-calendar)
* ì¥ì :

    * React ê³µì‹ ì§€ì›
    * ì¼ì • ê´€ë¦¬ íŠ¹í™”
    * ì»¤ìŠ¤í„°ë§ˆì´ì§• ìš°ìˆ˜
    * ë“œë˜ê·¸/ë“œë¡­ ì§€ì›

---

